{"ast":null,"code":"/*!\n * router\n * Copyright(c) 2013 Roman Shtylman\n * Copyright(c) 2014 Douglas Christopher Wilson\n * MIT Licensed\n */\n'use strict';\n/**\n * Module dependencies.\n * @private\n */\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/web.immediate.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nvar debug = require('debug')('router:route');\n\nvar flatten = require('array-flatten').flatten;\n\nvar Layer = require('./layer');\n\nvar methods = require('methods');\n/**\n * Module variables.\n * @private\n */\n\n\nvar slice = Array.prototype.slice;\n/* istanbul ignore next */\n\nvar defer = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n  process.nextTick(fn.bind.apply(fn, arguments));\n};\n/**\n * Expose `Route`.\n */\n\nmodule.exports = Route;\n/**\n * Initialize `Route` with the given `path`,\n *\n * @param {String} path\n * @api private\n */\n\nfunction Route(path) {\n  debug('new %o', path);\n  this.path = path;\n  this.stack = []; // route handlers for various http methods\n\n  this.methods = Object.create(null);\n}\n/**\n * @private\n */\n\n\nRoute.prototype._handles_method = function _handles_method(method) {\n  if (this.methods._all) {\n    return true;\n  } // normalize name\n\n\n  var name = method.toLowerCase();\n\n  if (name === 'head' && !this.methods['head']) {\n    name = 'get';\n  }\n\n  return Boolean(this.methods[name]);\n};\n/**\n * @return {array} supported HTTP methods\n * @private\n */\n\n\nRoute.prototype._methods = function _methods() {\n  var methods = Object.keys(this.methods); // append automatic head\n\n  if (this.methods.get && !this.methods.head) {\n    methods.push('head');\n  }\n\n  for (var i = 0; i < methods.length; i++) {\n    // make upper case\n    methods[i] = methods[i].toUpperCase();\n  }\n\n  return methods;\n};\n/**\n * dispatch req, res into this route\n *\n * @private\n */\n\n\nRoute.prototype.dispatch = function dispatch(req, res, done) {\n  var idx = 0;\n  var stack = this.stack;\n  var sync = 0;\n\n  if (stack.length === 0) {\n    return done();\n  }\n\n  var method = req.method.toLowerCase();\n\n  if (method === 'head' && !this.methods['head']) {\n    method = 'get';\n  }\n\n  req.route = this;\n  next();\n\n  function next(err) {\n    // signal to exit route\n    if (err && err === 'route') {\n      return done();\n    } // signal to exit router\n\n\n    if (err && err === 'router') {\n      return done(err);\n    } // no more matching layers\n\n\n    if (idx >= stack.length) {\n      return done(err);\n    } // max sync stack\n\n\n    if (++sync > 100) {\n      return defer(next, err);\n    }\n\n    var layer;\n    var match; // find next matching layer\n\n    while (match !== true && idx < stack.length) {\n      layer = stack[idx++];\n      match = !layer.method || layer.method === method;\n    } // no match\n\n\n    if (match !== true) {\n      return done(err);\n    }\n\n    if (err) {\n      layer.handle_error(err, req, res, next);\n    } else {\n      layer.handle_request(req, res, next);\n    }\n\n    sync = 0;\n  }\n};\n/**\n * Add a handler for all HTTP verbs to this route.\n *\n * Behaves just like middleware and can respond or call `next`\n * to continue processing.\n *\n * You can use multiple `.all` call to add multiple handlers.\n *\n *   function check_something(req, res, next){\n *     next()\n *   }\n *\n *   function validate_user(req, res, next){\n *     next()\n *   }\n *\n *   route\n *   .all(validate_user)\n *   .all(check_something)\n *   .get(function(req, res, next){\n *     res.send('hello world')\n *   })\n *\n * @param {array|function} handler\n * @return {Route} for chaining\n * @api public\n */\n\n\nRoute.prototype.all = function all(handler) {\n  var callbacks = flatten(slice.call(arguments));\n\n  if (callbacks.length === 0) {\n    throw new TypeError('argument handler is required');\n  }\n\n  for (var i = 0; i < callbacks.length; i++) {\n    var fn = callbacks[i];\n\n    if (typeof fn !== 'function') {\n      throw new TypeError('argument handler must be a function');\n    }\n\n    var layer = Layer('/', {}, fn);\n    layer.method = undefined;\n    this.methods._all = true;\n    this.stack.push(layer);\n  }\n\n  return this;\n};\n\nmethods.forEach(function (method) {\n  Route.prototype[method] = function (handler) {\n    var callbacks = flatten(slice.call(arguments));\n\n    if (callbacks.length === 0) {\n      throw new TypeError('argument handler is required');\n    }\n\n    for (var i = 0; i < callbacks.length; i++) {\n      var fn = callbacks[i];\n\n      if (typeof fn !== 'function') {\n        throw new TypeError('argument handler must be a function');\n      }\n\n      debug('%s %s', method, this.path);\n      var layer = Layer('/', {}, fn);\n      layer.method = method;\n      this.methods[method] = true;\n      this.stack.push(layer);\n    }\n\n    return this;\n  };\n});","map":{"version":3,"sources":["C:/Users/edwin/Documents/GitHub-Projects/couples-scoreboard-spring/scoreboard-vue/node_modules/router/lib/route.js"],"names":["debug","require","flatten","Layer","methods","slice","Array","prototype","defer","setImmediate","fn","process","nextTick","bind","apply","arguments","module","exports","Route","path","stack","Object","create","_handles_method","method","_all","name","toLowerCase","Boolean","_methods","keys","get","head","push","i","length","toUpperCase","dispatch","req","res","done","idx","sync","route","next","err","layer","match","handle_error","handle_request","all","handler","callbacks","call","TypeError","undefined","forEach"],"mappings":"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","sourcesContent":["/*!\n * router\n * Copyright(c) 2013 Roman Shtylman\n * Copyright(c) 2014 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar debug = require('debug')('router:route')\nvar flatten = require('array-flatten').flatten\nvar Layer = require('./layer')\nvar methods = require('methods')\n\n/**\n * Module variables.\n * @private\n */\n\nvar slice = Array.prototype.slice\n\n/* istanbul ignore next */\nvar defer = typeof setImmediate === 'function'\n  ? setImmediate\n  : function (fn) { process.nextTick(fn.bind.apply(fn, arguments)) }\n\n/**\n * Expose `Route`.\n */\n\nmodule.exports = Route\n\n/**\n * Initialize `Route` with the given `path`,\n *\n * @param {String} path\n * @api private\n */\n\nfunction Route(path) {\n  debug('new %o', path)\n  this.path = path\n  this.stack = []\n\n  // route handlers for various http methods\n  this.methods = Object.create(null)\n}\n\n/**\n * @private\n */\n\nRoute.prototype._handles_method = function _handles_method(method) {\n  if (this.methods._all) {\n    return true\n  }\n\n  // normalize name\n  var name = method.toLowerCase()\n\n  if (name === 'head' && !this.methods['head']) {\n    name = 'get'\n  }\n\n  return Boolean(this.methods[name])\n}\n\n/**\n * @return {array} supported HTTP methods\n * @private\n */\n\nRoute.prototype._methods = function _methods() {\n  var methods = Object.keys(this.methods)\n\n  // append automatic head\n  if (this.methods.get && !this.methods.head) {\n    methods.push('head')\n  }\n\n  for (var i = 0; i < methods.length; i++) {\n    // make upper case\n    methods[i] = methods[i].toUpperCase()\n  }\n\n  return methods\n}\n\n/**\n * dispatch req, res into this route\n *\n * @private\n */\n\nRoute.prototype.dispatch = function dispatch(req, res, done) {\n  var idx = 0\n  var stack = this.stack\n  var sync = 0\n\n  if (stack.length === 0) {\n    return done()\n  }\n\n  var method = req.method.toLowerCase()\n  if (method === 'head' && !this.methods['head']) {\n    method = 'get'\n  }\n\n  req.route = this\n\n  next()\n\n  function next(err) {\n    // signal to exit route\n    if (err && err === 'route') {\n      return done()\n    }\n\n    // signal to exit router\n    if (err && err === 'router') {\n      return done(err)\n    }\n\n    // no more matching layers\n    if (idx >= stack.length) {\n      return done(err)\n    }\n\n    // max sync stack\n    if (++sync > 100) {\n      return defer(next, err)\n    }\n\n    var layer\n    var match\n\n    // find next matching layer\n    while (match !== true && idx < stack.length) {\n      layer = stack[idx++]\n      match = !layer.method || layer.method === method\n    }\n\n    // no match\n    if (match !== true) {\n      return done(err)\n    }\n\n    if (err) {\n      layer.handle_error(err, req, res, next)\n    } else {\n      layer.handle_request(req, res, next)\n    }\n\n    sync = 0\n  }\n}\n\n/**\n * Add a handler for all HTTP verbs to this route.\n *\n * Behaves just like middleware and can respond or call `next`\n * to continue processing.\n *\n * You can use multiple `.all` call to add multiple handlers.\n *\n *   function check_something(req, res, next){\n *     next()\n *   }\n *\n *   function validate_user(req, res, next){\n *     next()\n *   }\n *\n *   route\n *   .all(validate_user)\n *   .all(check_something)\n *   .get(function(req, res, next){\n *     res.send('hello world')\n *   })\n *\n * @param {array|function} handler\n * @return {Route} for chaining\n * @api public\n */\n\nRoute.prototype.all = function all(handler) {\n  var callbacks = flatten(slice.call(arguments))\n\n  if (callbacks.length === 0) {\n    throw new TypeError('argument handler is required')\n  }\n\n  for (var i = 0; i < callbacks.length; i++) {\n    var fn = callbacks[i]\n\n    if (typeof fn !== 'function') {\n      throw new TypeError('argument handler must be a function')\n    }\n\n    var layer = Layer('/', {}, fn)\n    layer.method = undefined\n\n    this.methods._all = true\n    this.stack.push(layer)\n  }\n\n  return this\n}\n\nmethods.forEach(function (method) {\n  Route.prototype[method] = function (handler) {\n    var callbacks = flatten(slice.call(arguments))\n\n    if (callbacks.length === 0) {\n      throw new TypeError('argument handler is required')\n    }\n\n    for (var i = 0; i < callbacks.length; i++) {\n      var fn = callbacks[i]\n\n      if (typeof fn !== 'function') {\n        throw new TypeError('argument handler must be a function')\n      }\n\n      debug('%s %s', method, this.path)\n\n      var layer = Layer('/', {}, fn)\n      layer.method = method\n\n      this.methods[method] = true\n      this.stack.push(layer)\n    }\n\n    return this\n  }\n})\n"]},"metadata":{},"sourceType":"script"}